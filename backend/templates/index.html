{% extends 'base.html' %}
{% block content %}
  <section class="hero hero--flash">
    <div class="hero__badge">‚ö° FlashUSDT</div>
    <h1 class="hero__title">Flash USDT Deals, <span class="grad">Live Now</span></h1>
    <p class="hero__subtitle">Buy limited-time USDT offers with instant settlement, auto-verified deposits, and a sleek, premium dashboard.</p>

    <div class="hero__ctas">
      {% if not current_user.is_authenticated %}
        <a class="btn primary" href="{{ url_for('core.register') }}">Get Started</a>
        <a class="btn" href="{{ url_for('core.login') }}">Login</a>
        <a class="btn outline" href="#how">How it works</a>
      {% else %}
        <a class="btn primary" href="{{ url_for('core.flash_sales') }}">View Flash Sales</a>
        <a class="btn" href="{{ url_for('core.wallet_addresses') }}">Charge Wallet</a>
        {% if current_user.is_admin %}
          <a class="btn outline" href="{{ url_for('core.admin_dashboard') }}">Admin</a>
        {% endif %}
      {% endif %}
    </div>

    <div class="hero__stats">
      <div class="stat-bubble"><span id="liveOffers">12</span><small>Live Offers</small></div>
      <div class="stat-bubble"><span>~3s</span><small>UI Response</small></div>
      <div class="stat-bubble"><span>6</span><small>USDT Decimals</small></div>
    </div>

    <div class="ticker" aria-label="flash ticker">
      <div class="ticker__track" id="flashTicker">
        <span>USDT x BTC Flash ‚Ä¢ -12% fee window ‚Ä¢ Ends in <b>00:14:22</b></span>
        <span>USDT x ETH Flash ‚Ä¢ Limited slots ‚Ä¢ Ends in <b>00:08:51</b></span>
        <span>USDT x TRX Flash ‚Ä¢ Low fees ‚Ä¢ Ends in <b>00:22:05</b></span>
        <span>USDT Boost ‚Ä¢ Loyalty bonus ‚Ä¢ Ends in <b>00:05:37</b></span>
      </div>
    </div>
  </section>

  <section class="badges">
    <div class="badge">SSL Secured</div>
    <div class="badge">USDT (ERC-20 & TRC20)</div>
    <div class="badge">Auto-verification</div>
  </section>

  <section class="features" id="about">
    <h2 class="section-title">About FlashUSDT</h2>
    <div style="max-width: 800px; margin: 0 auto; text-align: center; color: var(--muted); line-height: 1.6;">
      <p>
        FlashUSDT is a premier simulated trading platform designed to demonstrate high-speed transaction settlements and automated wallet management. 
        Born from the need for speed in the crypto space, we provide a seamless interface for accessing limited-time liquidity offers.
      </p>
      <p style="margin-top: 15px;">
        Our architecture relies on real-time node polling and secure automated verification, ensuring that every "Flash Deal" you claim is processed instantly.
      </p>
    </div>
  </section>

  <section class="features" id="features">
    <h2 class="section-title">Key Features</h2>
    <div class="grid">
      <article class="feat-card">
        <h3>Instant Wallet Updates</h3>
        <p>Simulated webhook now; plug a real provider later. Your balance updates the second deposits are confirmed.</p>
      </article>
      <article class="feat-card">
        <h3>Timed Flash Offers</h3>
        <p>Transparent countdowns, per-unit pricing, and instant checkout when your balance is sufficient.</p>
      </article>
      <article class="feat-card">
        <h3>Google Login</h3>
        <p>One-click sign-in with Google (optional). Email + password supported too.</p>
      </article>
      <article class="feat-card">
        <h3>Admin Controls</h3>
        <p>Create, activate, or pause offers; monitor deposits and purchases in one panel.</p>
      </article>
    </div>
  </section>

  <section class="how" id="how">
    <h2 class="section-title">How it works</h2>
    <ol class="steps">
      <li><span>1</span> Register or Login</li>
      <li><span>2</span> QR payment Available</li>
      <li><span>3</span> Pick a Flash Deal &amp; Amount</li>
      <li><span>4</span> Buy instantly ‚Ä¢ See it in Dashboard</li>
    </ol>
  </section>

  <section class="reviews" id="reviews" style="margin-top: 60px;">
    <h2 class="section-title">Community Reviews</h2>
    <p style="text-align:center; color: var(--muted); margin-bottom: 30px;">See what others are saying about FlashUSDT.</p>
    
    <div class="grid">
        {% for r in reviews %}
        <div class="card" style="text-align: left;">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px;">
                <strong style="color:#e6f1ff; font-size:1.1rem;">{{ r.author_name }}</strong>
                <small style="color:#64748b;">{{ r.created_at.strftime('%Y-%m-%d') }}</small>
            </div>
            <p style="color:#a5b4cf; line-height:1.6; font-style:italic;">"{{ r.content }}"</p>
            <div style="color:#facc15; font-size:0.9rem; margin-top:10px;">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
        </div>
        {% else %}
        <p style="text-align:center; color:#64748b; grid-column:1/-1;">No reviews yet. Be the first!</p>
        {% endfor %}
    </div>

    <div style="max-width: 600px; margin: 40px auto; background: var(--panel); padding: 30px; border-radius: 15px; border: 1px solid rgba(255,255,255,0.08);">
        <h3 style="text-align:center; margin-top:0;">Write a Review</h3>
        {% if current_user.is_authenticated %}
            <form action="{{ url_for('core.submit_comment') }}" method="POST">
                <label>Display Name</label>
                <input type="text" name="author_name" value="{{ current_user.email.split('@')[0] }}" required placeholder="Your name...">
                
                <label>Your Review</label>
                <textarea name="content" rows="4" required placeholder="Share your experience..." style="width:100%; padding:12px; background:#0b1322; border:1px solid #334155; border-radius:10px; color:white; resize:vertical;"></textarea>
                
                <button type="submit" class="btn primary" style="width:100%; margin-top:15px;">Submit Review</button>
                <p style="font-size:0.8rem; color:#64748b; text-align:center; margin-top:10px;">* Reviews require admin approval before posting.</p>
            </form>
        {% else %}
            <div style="text-align:center;">
                <p style="color:#94a3b8;">You must be logged in to leave a comment.</p>
                <a href="{{ url_for('core.login') }}" class="btn primary">Login to Comment</a>
            </div>
        {% endif %}
    </div>
  </section>
  <section class="social">
    <h2 class="section-title">Trusted by fast movers</h2>
    <div class="quotes">
      <blockquote>‚ÄúThe checkout is instant, the UI is üî•.‚Äù <span>‚Äî Power user</span></blockquote>
      <blockquote>‚ÄúI love the glow effects and the countdowns.‚Äù <span>‚Äî Designer trader</span></blockquote>
    </div>
  </section>

  <section class="faq" id="faq">
    <h2 class="section-title">Frequently asked questions</h2>
    <details>
      <summary>What is a Flash USDT offer?</summary>
      <p>Time-boxed deals at a fixed per-unit price. Buy while the timer runs and your balance allows.</p>
    </details>
    <details>
      <summary>How do I BUY Flash USDT?</summary>
      <p> After Register , select the <em>crypto coin</em> and select Buy Flash or buy software , next you will get QR scanner and Coin addres appears and now make payment . and put all details lastly ADMIN approve your payment and Sends Flash or software.</p>
    </details>
    <details>
      <summary>Can I use Google to sign in?</summary>
      <p>Yes, if enabled in settings. Otherwise use email + password.</p>
    </details>
  </section>

  <section class="contact" id="contact" style="margin-top: 60px; text-align: center;">
    <h2 class="section-title">Get in Touch</h2>
    <p style="color: var(--muted); margin-bottom: 30px;">Have questions or need support? Reach out to our 24/7 team.</p>
    
    <div class="grid" style="max-width: 600px; margin: 0 auto;">
      <a href="https://t.me/{{ site_settings.telegram_id|replace('@','') }}" target="_blank" class="card" style="text-decoration: none; padding: 20px; border-color: #0088cc;">
        <h3 style="color: #0088cc; margin: 0;">Telegram</h3>
        <p style="color: var(--muted); margin: 5px 0 0;">Live Chat Support</p>
        <p style="color: #e6f1ff; font-weight: bold; margin-top: 10px;">{{ site_settings.telegram_id }}</p>
        <span class="btn" style="margin-top: 15px; background: rgba(0, 136, 204, 0.15); color: #0088cc; border: none;">Open Chat</span>
      </a>
      
      <div class="card" style="padding: 20px; border-color: var(--primary);">
        <h3 style="color: var(--primary); margin: 0;">Email</h3>
        <p style="color: #e6f1ff; font-weight: bold; margin: 5px 0 0;">{{ site_settings.support_email }}</p>
        <a href="mailto:{{ site_settings.support_email }}" class="btn primary" style="margin-top: 15px;">Send Email</a>
      </div>
    </div>
  </section>
  
  {% if not current_user.is_authenticated %}
  <div id="welcomeModal" class="modal hidden" aria-hidden="true">
    <div class="modal__backdrop" onclick="hideWelcomeModal()"></div>
    <div class="modal__card">
      <button class="modal__close" onclick="hideWelcomeModal()">√ó</button>
      
      <div class="modal__badge">‚ö° Limited Offer</div>
      <h3 class="modal__title">New to FlashUSDT?</h3>
      <p class="modal__sub">Sign up now to access exclusive flash deals and instant settlements.</p>

      <div class="modal__google">
        <a class="btn-google" href="{{ url_for('core.login_google') }}">
          <span class="g-icon">
            <svg width="18" height="18" viewBox="0 0 48 48"><path fill="#FFC107" d="M43.611 20.083H42V20H24v8h11.303C33.72 32.91 29.267 36 24 36c-6.627 0-12-5.373-12-12s5.373-12 12-12c3.06 0 5.84 1.153 7.949 3.051l5.657-5.657C34.958 6.016 29.741 4 24 4 12.955 4 4 12.955 4 24s8.955 20 20 20 20-8.955 20-20c0-1.341-.138-2.651-.389-3.917z"/><path fill="#FF3D00" d="M6.306 14.691l6.571 4.817C14.248 16.279 18.787 12 24 12c3.06 0 5.84 1.153 7.949 3.051l5.657-5.657C34.958 6.016 29.741 4 24 4 16.318 4 9.713 8.337 6.306 14.691z"/><path fill="#4CAF50" d="M24 44c5.192 0 9.932-1.98 13.51-5.214l-6.23-5.266C29.25 35.897 26.79 36.9 24 36.9c-5.239 0-9.704-3.112-11.588-7.565l-6.52 5.02C8.322 40.03 15.575 44 24 44z"/><path fill="#1976D2" d="M43.611 20.083H42V20H24v8h11.303c-1.017 3.065-3.251 5.526-6.022 6.982l.001-.001 6.23 5.266C37.22 37.787 40 31.999 40 24c0-1.341-.138-2.651-.389-3.917z"/></svg>
          </span>
          <span class="g-label">Continue with Google</span>
        </a>
      </div>

      <div class="modal__row">
        <a href="{{ url_for('core.login') }}" class="btn full-width">Log In</a>
        <a href="{{ url_for('core.register') }}" class="btn primary full-width">Create Account</a>
      </div>
    </div>
  </div>
  {% endif %}
{% endblock %}